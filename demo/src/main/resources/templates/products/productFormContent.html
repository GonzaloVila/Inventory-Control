<div th:fragment="productFormContent" xmlns:th="http://www.thymeleaf.org">
    <div class="card-body">
        <form th:action="${product.id == null ? '/web/products/add' : '/web/products/update/' + product.id}"
              th:object="${product}" method="post">

            <div class="form-group">
                <label for="name">Nombre:</label>
                <input type="text" class="form-control" id="name" th:field="*{name}" required>
                <div class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
            </div>

            <div class="form-group">
                <label for="description">Descripción:</label>
                <textarea class="form-control" id="description" th:field="*{description}" rows="3"></textarea>
                <div class="text-danger" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
            </div>

            <div class="form-group">
                <label for="stock">Stock:</label>
                <input type="number" class="form-control" id="stock" th:field="*{stock}" required min="0">
                <div class="text-danger" th:if="${#fields.hasErrors('stock')}" th:errors="*{stock}"></div>
            </div>

            <div class="form-group">
                <label for="price">Precio:</label>
                <input type="number" class="form-control" id="price" th:field="*{price}" step="0.01" required min="0.01">
                <div class="text-danger" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></div>
            </div>

            <div class="form-group">
                <label for="category">Categoría:</label>
                <select class="form-control" id="category" th:field="*{category.id}" required>
                    <option value="">-- Seleccione una Categoría --</option>
                    <option th:each="cat : ${categories}"
                            th:value="${cat.id}"
                            th:text="${cat.name}"
                            th:selected="${product.category != null and product.category.id == cat.id}"></option>
                </select>
                <div class="text-danger" th:if="${#fields.hasErrors('category')}" th:errors="*{category.id}"></div>
            </div>

            <div class="form-group">
                <label for="provider">Proveedor:</label>
                <select class="form-control" id="provider" th:field="*{provider.id}" required>
                    <option value="">-- Seleccione un Proveedor --</option>
                    <option th:each="prov : ${providers}"
                            th:value="${prov.id}"
                            th:text="${prov.name}"
                            th:selected="${product.provider != null and product.provider.id == prov.id}"></option>
                </select>
                <div class="text-danger" th:if="${#fields.hasErrors('provider')}" th:errors="*{provider.id}"></div>
            </div>

            <div class="form-group" th:if="${product.id != null}">
                <label for="isActive">Activo:</label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="isActive" th:field="*{isActive}">
                    <label class="form-check-label" for="isActive">Marcar si el producto está activo</label>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Guardar Producto</button>

        </form>
    </div>
</div>